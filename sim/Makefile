# -*- Makefile -*-
### Makefile - VHDL Makefile generated by Emacs VHDL Mode 3.33.28

# Project   : 400X
# Platform  : GHDL
# Generated : 2012-12-23 11:08:41 oddbjorn


# Define compilation command and options

COMPILE = ghdl
OPTIONS = -a --workdir=work --work=work --ieee=synopsys -fexplicit --std=93c


# Define library paths

LIBRARY-work = work


# Define library unit files

UNIT-work-cpu_4004 = \
	$(LIBRARY-work)/cpu_4004/entity 
UNIT-work-cpu_4004-twoproc = \
	$(LIBRARY-work)/cpu_4004/twoproc
UNIT-work-cpu_4004_tb = \
	$(LIBRARY-work)/cpu_4004_tb/entity 
UNIT-work-cpu_4004_tb-test = \
	$(LIBRARY-work)/cpu_4004_tb/test
UNIT-work-cpu_4004_tb_test_cfg = \
	$(LIBRARY-work)/cpu_4004_tb_test_cfg/configuration
UNIT-work-cpu_400x_pkg = \
	$(LIBRARY-work)/cpu_400x_pkg/package
UNIT-work-sim_pkg = \
	$(LIBRARY-work)/sim_pkg/package
UNIT-work-sim_pkg-body = \
	$(LIBRARY-work)/sim_pkg/body 


# Define list of all library unit files

ALL_UNITS = \
	$(UNIT-work-cpu_4004) \
	$(UNIT-work-cpu_4004-twoproc) \
	$(UNIT-work-cpu_4004_tb) \
	$(UNIT-work-cpu_4004_tb-test) \
	$(UNIT-work-cpu_4004_tb_test_cfg) \
	$(UNIT-work-cpu_400x_pkg) \
	$(UNIT-work-sim_pkg) \
	$(UNIT-work-sim_pkg-body)



# Rule for compiling entire design

all : \
		library \
		$(ALL_UNITS)


# Rule for cleaning entire design

clean : 
	-rm -f $(ALL_UNITS)


# Rule for creating library directory

library : \
		$(LIBRARY-work)

$(LIBRARY-work) :
	mkdir $(LIBRARY-work)


.PHONY : all clean library


# Rules for compiling single library units and their subhierarchy

cpu_4004 : \
		library \
		$(UNIT-work-cpu_4004) \
		$(UNIT-work-cpu_4004-twoproc) \
		sim_pkg

cpu_4004_tb : \
		library \
		$(UNIT-work-cpu_4004_tb) \
		$(UNIT-work-cpu_4004_tb-test) \
		cpu_4004 \
		cpu_400x_pkg \
		sim_pkg

cpu_4004_tb_test_cfg : \
		library \
		$(UNIT-work-cpu_4004_tb_test_cfg) \
		cpu_4004_tb

cpu_400x_pkg \
cpu_400X_pkg : \
		library \
		$(UNIT-work-cpu_400x_pkg)

sim_pkg : \
		library \
		$(UNIT-work-sim_pkg) \
		$(UNIT-work-sim_pkg-body)


# Rules for compiling single library unit files

$(UNIT-work-cpu_4004) : \
		../src/4004.vhd \
		$(UNIT-work-sim_pkg)
	$(COMPILE) $(OPTIONS) ../src/4004.vhd

$(UNIT-work-cpu_4004-twoproc) : \
		../src/cpu_4004.vhd \
		$(UNIT-work-cpu_4004)
	$(COMPILE) $(OPTIONS) ../src/cpu_4004.vhd

$(UNIT-work-cpu_4004_tb) \
$(UNIT-work-cpu_4004_tb-test) \
$(UNIT-work-cpu_4004_tb_test_cfg) : \
		../src/cpu_4004_tb.vhd \
		$(UNIT-work-cpu_4004) \
		$(UNIT-work-cpu_400x_pkg) \
		$(UNIT-work-sim_pkg)
	$(COMPILE) $(OPTIONS) ../src/cpu_4004_tb.vhd

$(UNIT-work-cpu_400x_pkg) : \
		../src/cpu_400X_pkg.vhd
	$(COMPILE) $(OPTIONS) ../src/cpu_400X_pkg.vhd

$(UNIT-work-sim_pkg) \
$(UNIT-work-sim_pkg-body) : \
		../src/sim_pkg.vhd
	$(COMPILE) $(OPTIONS) ../src/sim_pkg.vhd


### Makefile ends here
